<!DOCTYPE html>
<html lang="en">

<head>
	<title>LoopRequest Example</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="loopRequest.js"></script>
</head>

<body>
	<div class="controll" style="text-align: center; padding: 15px;">
		<a href="javascript:" onclick="startLooping()">Click me to start</a>
		<br>
		<a href="javascript:" onclick="stopLooping()">Stop</a>
	</div>
	<div id="box" style="width: 200px; height: 200px; position: relative; background: lightblue; border-radius: 8px; margin: 20px;"></div>
	<p id="target" style="font-size: 20px; font-family: cursive; width: 50%; margin: 20px auto;">Excepteur dolore dolor commodo nulla adipisicing aliquip voluptate est elit in in id. Anim sint id eiusmod magna dolor quis
		duis ullamco. Elit enim occaecat quis cupidatat officia cupidatat aliquip et minim et dolor nulla enim pariatur. Id consectetur
		occaecat mollit ex ex dolor enim.</p>


	<script>
    var func1, func2, loop1, loop2;

    var target = document.querySelector("#target");
    var text = target.innerHTML;
    var l = text.length;
    var currentContent = "";
    var currentPos = 0;
    target.innerHTML = currentContent;

    func1 = function() {
      if (currentPos >= (l - 1)) {
        currentPos = 0;
        currentContent = "";
      }
      currentContent = currentContent + text[currentPos];
      currentPos++;
      target.innerHTML = currentContent;
    }

    var box = document.querySelector("#box");
    var left = 0;
    var increment = 3;
    var max = document.body.clientWidth - 200;
    var backward = false;

    func2 = function() {
      if (left >= max) {
        backward = true;
      } else if (left <= 0) {
        backward = false;
      }
      if (backward) {
        left -= increment;
      } else {
        left += increment;
      }

      box.style.left = left + "px";
    }

    loop1 = new LoopRequest(func1, 80);
    loop2 = new LoopRequest(func2);



    function startLooping() {
      loop1.start();
      loop2.start();
    }

    function stopLooping() {
      loop1.stop();
      loop2.stop();
    }
  </script>
</body>

</html>